var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&o(e,n,t[n]);return e},i=(e,r)=>t(e,n(r));import{S as c,i as u,s as d,e as p,c as h,a as f,d as g,b as m,f as v,F as k,r as y,u as $,w as b,x as E,t as x,g as _,h as w,K as P,l as L,k as I,n as D,j as A,m as N,o as V,v as O,L as j,M as T,J as S,N as B,O as C,A as q,P as R,Q as U,R as M,T as z,U as J,V as Z,W as K,X as W,Y as F,Z as G,_ as H}from"../chunks/vendor-be96c903.js";function X(e,t,n){const r=e.slice();return r[4]=t[n],r}function Q(e){let t,n;return{c(){t=p("code"),n=x(e[0]),this.h()},l(r){t=h(r,"CODE",{class:!0});var l=f(t);n=_(l,e[0]),l.forEach(g),this.h()},h(){m(t,"class","svelte-sgqldn")},m(e,r){v(e,t,r),k(t,n)},p(e,t){1&t&&w(n,e[0])},i:P,o:P,d(e){e&&g(t)}}}function Y(e){let t,n,r,l;const a=[te,ee],o=[];function s(e,t){return e[0].children.length?0:1}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),r=L()},l(e){n.l(e),r=L()},m(e,n){o[t].m(e,n),v(e,r,n),l=!0},p(e,l){let i=t;t=s(e),t===i?o[t].p(e,l):(y(),$(o[i],1,1,(()=>{o[i]=null})),b(),n=o[t],n?n.p(e,l):(n=o[t]=a[t](e),n.c()),E(n,1),n.m(r.parentNode,r))},i(e){l||(E(n),l=!0)},o(e){$(n),l=!1},d(e){o[t].d(e),e&&g(r)}}}function ee(e){let t,n,r,l,a=e[0].data+"";return{c(){t=p("span"),n=p("span"),r=I(),l=x(a),this.h()},l(e){t=h(e,"SPAN",{});var o=f(t);n=h(o,"SPAN",{class:!0}),f(n).forEach(g),r=D(o),l=_(o,a),o.forEach(g),this.h()},h(){m(n,"class","no-arrow svelte-sgqldn")},m(e,a){v(e,t,a),k(t,n),k(t,r),k(t,l)},p(e,t){1&t&&a!==(a=e[0].data+"")&&w(l,a)},i:P,o:P,d(e){e&&g(t)}}}function te(e){let t,n,r,l,a,o,s,i,c,u,d,P=e[0].data+"",A=e[1]&&ne(e);return{c(){t=p("span"),n=p("span"),r=x("▶"),l=I(),a=p("span"),o=x(P),s=I(),A&&A.c(),i=L(),this.h()},l(e){t=h(e,"SPAN",{});var c=f(t);n=h(c,"SPAN",{class:!0});var u=f(n);r=_(u,"▶"),u.forEach(g),l=D(c),a=h(c,"SPAN",{class:!0});var d=f(a);o=_(d,P),d.forEach(g),c.forEach(g),s=D(e),A&&A.l(e),i=L(),this.h()},h(){m(n,"class","arrow svelte-sgqldn"),T(n,"arrowDown",e[2]),m(a,"class","label svelte-sgqldn")},m(p,h){v(p,t,h),k(t,n),k(n,r),k(t,l),k(t,a),k(a,o),v(p,s,h),A&&A.m(p,h),v(p,i,h),c=!0,u||(d=S(t,"click",e[3]),u=!0)},p(e,t){4&t&&T(n,"arrowDown",e[2]),(!c||1&t)&&P!==(P=e[0].data+"")&&w(o,P),e[1]?A?(A.p(e,t),2&t&&E(A,1)):(A=ne(e),A.c(),E(A,1),A.m(i.parentNode,i)):A&&(y(),$(A,1,1,(()=>{A=null})),b())},i(e){c||(E(A),c=!0)},o(e){$(A),c=!1},d(e){e&&g(t),e&&g(s),A&&A.d(e),e&&g(i),u=!1,d()}}}function ne(e){let t,n,r=[...e[0].children],l=[];for(let o=0;o<r.length;o+=1)l[o]=re(X(e,r,o));const a=e=>$(l[e],1,1,(()=>{l[e]=null}));return{c(){t=p("div");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){t=h(e,"DIV",{class:!0});var n=f(t);for(let t=0;t<l.length;t+=1)l[t].l(n);n.forEach(g),this.h()},h(){m(t,"class","children")},m(e,r){v(e,t,r);for(let n=0;n<l.length;n+=1)l[n].m(t,null);n=!0},p(e,n){if(1&n){let o;for(r=[...e[0].children],o=0;o<r.length;o+=1){const a=X(e,r,o);l[o]?(l[o].p(a,n),E(l[o],1)):(l[o]=re(a),l[o].c(),E(l[o],1),l[o].m(t,null))}for(y(),o=r.length;o<l.length;o+=1)a(o);b()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)E(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)$(l[t]);n=!1},d(e){e&&g(t),j(l,e)}}}function re(e){let t,n;return t=new oe({props:{tree:e[4]}}),{c(){A(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){V(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.tree=e[4]),t.$set(r)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function le(e){let t,n,r,l,a;const o=[Y,Q],s=[];function i(e,t){return"Tree"===e[0].type?0:1}return r=i(e),l=s[r]=o[r](e),{c(){t=p("ul"),n=p("li"),l.c(),this.h()},l(e){t=h(e,"UL",{class:!0});var r=f(t);n=h(r,"LI",{});var a=f(n);l.l(a),a.forEach(g),r.forEach(g),this.h()},h(){m(t,"class","svelte-sgqldn")},m(e,l){v(e,t,l),k(t,n),s[r].m(n,null),a=!0},p(e,[t]){let a=r;r=i(e),r===a?s[r].p(e,t):(y(),$(s[a],1,1,(()=>{s[a]=null})),b(),l=s[r],l?l.p(e,t):(l=s[r]=o[r](e),l.c()),E(l,1),l.m(n,null))},i(e){a||(E(l),a=!0)},o(e){$(l),a=!1},d(e){e&&g(t),s[r].d()}}}function ae(e,t,n){let r,{tree:l}=t,a=!0;return e.$$set=e=>{"tree"in e&&n(0,l=e.tree)},e.$$.update=()=>{2&e.$$.dirty&&n(2,r=a)},[l,a,r,()=>{n(1,a=!a)}]}class oe extends c{constructor(e){super(),u(this,e,ae,le,d,{tree:0})}}function se(e){let t;return{c(){t=p("div"),this.h()},l(e){t=h(e,"DIV",{style:!0}),f(t).forEach(g),this.h()},h(){B(t,"flex-grow","1"),B(t,"overflow","hidden"),B(t,"border","1px solid grey")},m(n,r){v(n,t,r),e[3](t)},p:P,i:P,o:P,d(n){n&&g(t),e[3](null)}}}function ie(e,t,n){const r=C();let l,{text:a=""}=t;const o={comments:{lineComment:"//"},brackets:[["(",")"],["[","]"],["{","}"]],autoClosingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"/",close:"/"},{open:'"',close:'"'}],surroundingPairs:[["(",")"],["[","]"],["{","}"],["/","/"],['"','"']]},s={defaultToken:"",tokenPostfix:".lark",keywords:[],brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/%(import|ignore|declare|override|extend)/,"keyword"],[/[\|]/,"delimiter"],[/[{}\[\]()]/,"@brackets"],[/([a-zA-Z_]*)\s*\:/,"variable.name"],[/\s*->\s*([a-zA-Z_]*)/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"identifier"}}]],whitespace:[[/\s+/,"white"],[/(^\/\/.*$)/,"comment"]],numbers:[[/-?0x([abcdef]|[ABCDEF]|\d)+[lL]?/,"number.hex"],[/-?(\d*\.)?\d+([eE][+\-]?\d+)?[jJ]?[lL]?/,"number"]],strings:[[/'$/,"string.escape","@popall"],[/'/,"string.escape","@stringBody"],[/"$/,"string.escape","@popall"],[/"/,"string.escape","@dblStringBody"]],stringBody:[[/[^\\']+$/,"string","@popall"],[/[^\\']+/,"string"],[/\\./,"string"],[/'/,"string.escape","@popall"],[/\\$/,"string"]],dblStringBody:[[/[^\\"]+$/,"string","@popall"],[/[^\\"]+/,"string"],[/\\./,"string"],[/"/,"string.escape","@popall"],[/\\$/,"string"]]}};let i;const c={value:a,language:"lark",automaticLayout:!0};return q((()=>{require.config({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.26.1/min/vs"}}),require(["vs/editor/editor.main"],(e=>{e.languages.register({id:"lark",extensions:[".lark"],aliases:["Lark","lark"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",configuration:"./lark.js"}),e.languages.setMonarchTokensProvider("lark",s),e.languages.setLanguageConfiguration("lark",o),l=e.editor.create(i,c),n(1,a=l.getModel().getValue()),l.getModel().onDidChangeContent((e=>{n(1,a=l.getModel().getValue())})),r("ready",{})}))})),e.$$set=e=>{"text"in e&&n(1,a=e.text)},[i,a,function(e){if(l)return l.getModel().setValue(e)},function(e){R[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class ce extends c{constructor(e){super(),u(this,e,ie,se,d,{text:1,set_text:2})}get set_text(){return this.$$.ctx[2]}}function ue(e){let t,n,r,l,a,o,s,i,c,u,d,y,$,b,E,w,L,A,N,V,O,j,T,B;return{c(){t=p("div"),n=p("div"),r=p("div"),l=x("Parser:"),a=I(),o=p("div"),s=p("input"),i=I(),c=p("label"),u=x("Earley"),d=I(),y=p("div"),$=p("input"),b=I(),E=p("label"),w=x("LALR(1)"),L=I(),A=p("div"),N=p("input"),V=I(),O=p("label"),j=x("Keep all tokens"),this.h()},l(e){t=h(e,"DIV",{id:!0,class:!0});var p=f(t);n=h(p,"DIV",{class:!0});var m=f(n);r=h(m,"DIV",{});var v=f(r);l=_(v,"Parser:"),v.forEach(g),a=D(m),o=h(m,"DIV",{});var k=f(o);s=h(k,"INPUT",{type:!0,id:!0,name:!0}),i=D(k),c=h(k,"LABEL",{for:!0});var x=f(c);u=_(x,"Earley"),x.forEach(g),k.forEach(g),d=D(m),y=h(m,"DIV",{});var P=f(y);$=h(P,"INPUT",{type:!0,id:!0,name:!0}),b=D(P),E=h(P,"LABEL",{for:!0});var I=f(E);w=_(I,"LALR(1)"),I.forEach(g),P.forEach(g),m.forEach(g),L=D(p),A=h(p,"DIV",{class:!0});var T=f(A);N=h(T,"INPUT",{type:!0,id:!0}),V=D(T),O=h(T,"LABEL",{for:!0});var S=f(O);j=_(S,"Keep all tokens"),S.forEach(g),T.forEach(g),p.forEach(g),this.h()},h(){m(s,"type","radio"),m(s,"id","earley"),m(s,"name","parser"),s.__value="earley",s.value=s.__value,s.checked=!0,e[6][0].push(s),m(c,"for","earley"),m($,"type","radio"),m($,"id","lalr"),m($,"name","parser"),$.__value="lalr",$.value=$.__value,e[6][0].push($),m(E,"for","lalr"),m(n,"class","option svelte-lws3ey"),m(N,"type","checkbox"),m(N,"id","keep_all_tokens"),m(O,"for","keep_all_tokens"),m(A,"class","option svelte-lws3ey"),m(t,"id","options"),m(t,"class","svelte-lws3ey")},m(p,h){v(p,t,h),k(t,n),k(n,r),k(r,l),k(n,a),k(n,o),k(o,s),s.checked=s.__value===e[0],k(o,i),k(o,c),k(c,u),k(n,d),k(n,y),k(y,$),$.checked=$.__value===e[0],k(y,b),k(y,E),k(E,w),k(t,L),k(t,A),k(A,N),N.checked=e[1],k(A,V),k(A,O),k(O,j),T||(B=[S(s,"input",e[2]),S(s,"change",e[5]),S($,"input",e[2]),S($,"change",e[7]),S(N,"change",e[8]),S(N,"input",e[3])],T=!0)},p(e,[t]){1&t&&(s.checked=s.__value===e[0]),1&t&&($.checked=$.__value===e[0]),2&t&&(N.checked=e[1])},i:P,o:P,d(n){n&&g(t),e[6][0].splice(e[6][0].indexOf(s),1),e[6][0].splice(e[6][0].indexOf($),1),T=!1,U(B)}}}function de(e,t,n){let r,l,{options:a}=t;return e.$$set=e=>{"options"in e&&n(4,a=e.options)},e.$$.update=()=>{16&e.$$.dirty&&a&&(n(0,r=a.parser),n(1,l=a.keep_all_tokens))},[r,l,function(e){setTimeout((()=>{n(4,a=i(s({},a),{parser:r}))}))},function(e){setTimeout((()=>{n(4,a=i(s({},a),{keep_all_tokens:l}))}))},a,function(){r=this.__value,n(0,r)},[[]],function(){r=this.__value,n(0,r)},function(){l=this.checked,n(1,l)}]}class pe extends c{constructor(e){super(),u(this,e,de,ue,d,{options:4})}}function he(e,t,n){const r=e.slice();return r[24]=t[n],r}function fe(e,t,n){const r=e.slice();return r[27]=t[n],r}function ge(e){let t,n,r,l,a=e[27].title+"";return{c(){t=p("option"),n=x(a),r=I(),this.h()},l(e){t=h(e,"OPTION",{});var l=f(t);n=_(l,a),r=D(l),l.forEach(g),this.h()},h(){t.__value=l=e[27].name,t.value=t.__value},m(e,l){v(e,t,l),k(t,n),k(t,r)},p:P,d(e){e&&g(t)}}}function me(e){let t,n,r=e[6],l=[];for(let a=0;a<r.length;a+=1)l[a]=ke(he(e,r,a));return{c(){t=x("Please wait, loading...\n\t\t"),n=p("ul");for(let e=0;e<l.length;e+=1)l[e].c()},l(e){t=_(e,"Please wait, loading...\n\t\t"),n=h(e,"UL",{});var r=f(n);for(let t=0;t<l.length;t+=1)l[t].l(r);r.forEach(g)},m(e,r){v(e,t,r),v(e,n,r);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(e,t){if(64&t){let a;for(r=e[6],a=0;a<r.length;a+=1){const o=he(e,r,a);l[a]?l[a].p(o,t):(l[a]=ke(o),l[a].c(),l[a].m(n,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=r.length}},i:P,o:P,d(e){e&&g(t),e&&g(n),j(l,e)}}}function ve(e){let t,n,r,l={ctx:e,current:null,token:null,hasCatch:!0,pending:Pe,then:$e,catch:ye,error:24,blocks:[,,,]};return G(n=e[3],l),{c(){t=L(),l.block.c()},l(e){t=L(),l.block.l(e)},m(e,n){v(e,t,n),l.block.m(e,l.anchor=n),l.mount=()=>t.parentNode,l.anchor=t,r=!0},p(t,r){e=t,l.ctx=e,8&r&&n!==(n=e[3])&&G(n,l)||H(l,e,r)},i(e){r||(E(l.block),r=!0)},o(e){for(let t=0;t<3;t+=1){const e=l.blocks[t];$(e)}r=!1},d(e){e&&g(t),l.block.d(e),l.token=null,l=null}}}function ke(e){let t,n,r=e[24]+"";return{c(){t=p("li"),n=x(r)},l(e){t=h(e,"LI",{});var l=f(t);n=_(l,r),l.forEach(g)},m(e,r){v(e,t,r),k(t,n)},p(e,t){64&t&&r!==(r=e[24]+"")&&w(n,r)},d(e){e&&g(t)}}}function ye(e){let t,n,r=e[24]+"";return{c(){t=p("pre"),n=x(r)},l(e){t=h(e,"PRE",{});var l=f(t);n=_(l,r),l.forEach(g)},m(e,r){v(e,t,r),k(t,n)},p(e,t){8&t&&r!==(r=e[24]+"")&&w(n,r)},i:P,o:P,d(e){e&&g(t)}}}function $e(e){let t,n,r,l={ctx:e,current:null,token:null,hasCatch:!0,pending:we,then:Ee,catch:be,value:23,error:24,blocks:[,,,]};return G(n=e[5],l),{c(){t=L(),l.block.c()},l(e){t=L(),l.block.l(e)},m(e,n){v(e,t,n),l.block.m(e,l.anchor=n),l.mount=()=>t.parentNode,l.anchor=t,r=!0},p(t,r){e=t,l.ctx=e,32&r&&n!==(n=e[5])&&G(n,l)||H(l,e,r)},i(e){r||(E(l.block),r=!0)},o(e){for(let t=0;t<3;t+=1){const e=l.blocks[t];$(e)}r=!1},d(e){e&&g(t),l.block.d(e),l.token=null,l=null}}}function be(e){let t,n,r=e[24]+"";return{c(){t=p("pre"),n=x(r)},l(e){t=h(e,"PRE",{});var l=f(t);n=_(l,r),l.forEach(g)},m(e,r){v(e,t,r),k(t,n)},p(e,t){32&t&&r!==(r=e[24]+"")&&w(n,r)},i:P,o:P,d(e){e&&g(t)}}}function Ee(e){let t,n,r,l;const a=[_e,xe],o=[];function s(e,t){return e[23]?0:1}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),r=L()},l(e){n.l(e),r=L()},m(e,n){o[t].m(e,n),v(e,r,n),l=!0},p(e,l){let i=t;t=s(e),t===i?o[t].p(e,l):(y(),$(o[i],1,1,(()=>{o[i]=null})),b(),n=o[t],n?n.p(e,l):(n=o[t]=a[t](e),n.c()),E(n,1),n.m(r.parentNode,r))},i(e){l||(E(n),l=!0)},o(e){$(n),l=!1},d(e){o[t].d(e),e&&g(r)}}}function xe(e){let t;return{c(){t=x("No result")},l(e){t=_(e,"No result")},m(e,n){v(e,t,n)},p:P,i:P,o:P,d(e){e&&g(t)}}}function _e(e){let t,n;return t=new oe({props:{tree:e[23]}}),{c(){A(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,r){V(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.tree=e[23]),t.$set(r)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function we(e){let t;return{c(){t=x("Parsing...")},l(e){t=_(e,"Parsing...")},m(e,n){v(e,t,n)},p:P,i:P,o:P,d(e){e&&g(t)}}}function Pe(e){let t;return{c(){t=x("Building Parser...")},l(e){t=_(e,"Building Parser...")},m(e,n){v(e,t,n)},p:P,i:P,o:P,d(e){e&&g(t)}}}function Le(e){let t,n,r,l,a,o,s,i,c,u,d,w,P,L,T,B,C,q,F,G,H,X,Q,Y,ee,te;function ne(t){e[12](t)}let re={};void 0!==e[1]&&(re.options=e[1]),a=new pe({props:re}),R.push((()=>M(a,"options",ne)));let le=e[9],ae=[];for(let p=0;p<le.length;p+=1)ae[p]=ge(fe(e,le,p));function oe(t){e[15](t)}let se={};void 0!==e[0]&&(se.text=e[0]),B=new ce({props:se}),e[14](B),R.push((()=>M(B,"text",oe))),B.$on("ready",e[10]);const ie=[ve,me],ue=[];function de(e,t){return e[4]?0:1}return X=de(e),Q=ue[X]=ie[X](e),{c(){t=I(),n=p("section"),r=p("div"),l=p("div"),A(a.$$.fragment),s=I(),i=p("div"),c=p("div"),u=p("div"),d=x("Load Grammar:"),w=I(),P=p("select");for(let e=0;e<ae.length;e+=1)ae[e].c();L=I(),T=p("div"),A(B.$$.fragment),q=I(),F=p("textarea"),G=I(),H=p("div"),Q.c(),this.h()},l(e){z('[data-svelte="svelte-3fm5e0"]',document.head).forEach(g),t=D(e),n=h(e,"SECTION",{id:!0,class:!0});var o=f(n);r=h(o,"DIV",{id:!0,class:!0});var p=f(r);l=h(p,"DIV",{id:!0,class:!0});var m=f(l);N(a.$$.fragment,m),m.forEach(g),s=D(p),i=h(p,"DIV",{id:!0,class:!0});var v=f(i);c=h(v,"DIV",{class:!0});var k=f(c);u=h(k,"DIV",{});var y=f(u);d=_(y,"Load Grammar:"),y.forEach(g),w=D(k),P=h(k,"SELECT",{class:!0});var $=f(P);for(let t=0;t<ae.length;t+=1)ae[t].l($);$.forEach(g),k.forEach(g),v.forEach(g),L=D(p),T=h(p,"DIV",{id:!0,class:!0});var b=f(T);N(B.$$.fragment,b),b.forEach(g),p.forEach(g),q=D(o),F=h(o,"TEXTAREA",{id:!0,class:!0}),f(F).forEach(g),G=D(o),H=h(o,"DIV",{id:!0,class:!0});var E=f(H);Q.l(E),E.forEach(g),o.forEach(g),this.h()},h(){document.title="Lark IDE",m(l,"id","options"),m(l,"class","svelte-1ekapp8"),m(P,"class","svelte-1ekapp8"),void 0===e[7]&&J((()=>e[13].call(P))),m(c,"class","option svelte-1ekapp8"),m(i,"id","load-grammar"),m(i,"class","svelte-1ekapp8"),m(T,"id","grammar"),m(T,"class","svelte-1ekapp8"),m(r,"id","grammar_pane"),m(r,"class","svelte-1ekapp8"),m(F,"id","text"),m(F,"class","svelte-1ekapp8"),m(H,"id","output"),m(H,"class","svelte-1ekapp8"),m(n,"id","ide"),m(n,"class","svelte-1ekapp8")},m(o,p){v(o,t,p),v(o,n,p),k(n,r),k(r,l),V(a,l,null),k(r,s),k(r,i),k(i,c),k(c,u),k(u,d),k(c,w),k(c,P);for(let e=0;e<ae.length;e+=1)ae[e].m(P,null);Z(P,e[7]),k(r,L),k(r,T),V(B,T,null),k(n,q),k(n,F),K(F,e[2]),k(n,G),k(n,H),ue[X].m(H,null),Y=!0,ee||(te=[S(P,"change",e[13]),S(P,"change",e[11]),S(F,"input",e[16])],ee=!0)},p(e,[t]){const n={};if(!o&&2&t&&(o=!0,n.options=e[1],W((()=>o=!1))),a.$set(n),512&t){let n;for(le=e[9],n=0;n<le.length;n+=1){const r=fe(e,le,n);ae[n]?ae[n].p(r,t):(ae[n]=ge(r),ae[n].c(),ae[n].m(P,null))}for(;n<ae.length;n+=1)ae[n].d(1);ae.length=le.length}640&t&&Z(P,e[7]);const r={};!C&&1&t&&(C=!0,r.text=e[0],W((()=>C=!1))),B.$set(r),4&t&&K(F,e[2]);let l=X;X=de(e),X===l?ue[X].p(e,t):(y(),$(ue[l],1,1,(()=>{ue[l]=null})),b(),Q=ue[X],Q?Q.p(e,t):(Q=ue[X]=ie[X](e),Q.c()),E(Q,1),Q.m(H,null))},i(e){Y||(E(a.$$.fragment,e),E(B.$$.fragment,e),E(Q),Y=!0)},o(e){$(a.$$.fragment,e),$(B.$$.fragment,e),$(Q),Y=!1},d(r){r&&g(t),r&&g(n),O(a),j(ae,r),e[14](null),O(B),ue[X].d(),ee=!1,U(te)}}}const Ie=!0;function De(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(l,a){function o(e){try{i(r.next(e))}catch(t){a(t)}}function s(e){try{i(r.throw(e))}catch(t){a(t)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}i((r=r.apply(e,t||[])).next())}))};const l={parser:"earley",keep_all_tokens:!1},a=[{title:"Blank",name:"blank",text:""},{title:"(easy) Hello World",name:"hello",text:"Hello, World!"},{title:"(easy) JSON parser",name:"json",text:'{"this": ["is", "JSON"]}',options:{parser:"lalr"}},{title:"(easy) Calculator",name:"calc",text:"20 / (13 - 6) + 1",options:{parser:"lalr"}}];let o,s,i,{grammar:c,options:u,text:d}=a[1];u=u||l;let p,h=[];function f(){i.globals.set("grammar",c),i.globals.set("options",u),n(3,o=i.runPythonAsync("parser = lark.Lark(grammar, **options.to_py())"))}let g,m="hello";function v(){return r(this,void 0,void 0,(function*(){if(console.log("Loading grammar",m),"blank"===m)return n(2,d=""),n(0,c=""),g.set_text(""),void n(1,u=l);let e=yield fetch("grammars/"+m+".lark");if(e.ok){n(0,c=yield e.text()),g.set_text(c);for(let e of a)if(e.name===m){n(2,d=e.text),n(1,u=e.options||l);break}}}))}return e.$$.update=()=>{var t;18&e.$$.dirty&&i&&u&&f(),17&e.$$.dirty&&i&&c&&(clearTimeout(p),p=setTimeout(f,500)),28&e.$$.dirty&&n(5,s=i&&o&&(t=d,i.globals.set("text",t),i.runPythonAsync("parser.parse(text)")))},[c,u,d,o,i,s,h,m,g,a,function(){return r(this,void 0,void 0,(function*(){var e,t;v(),i||(e=e=>{n(4,i=e)},(t=e=>{n(6,h=[...h,e])})&&t("Loading Pyodide"),require(["https://cdn.jsdelivr.net/pyodide/v0.18.0/full/pyodide.js"],(n=>{n.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.18.0/full/"}).then((async n=>{console.log("Pyodide loaded",n),t&&t("Installing micropip"),await n.loadPackage("micropip"),t&&t("Downloading & Installing Lark"),await n.runPythonAsync("import micropip; await micropip.install('lark-parser');"),n.runPython("import lark"),e(n),console.log("Ready!",n)}))})))}))},v,function(e){u=e,n(1,u)},function(){m=F(this),n(7,m),n(9,a)},function(e){R[e?"unshift":"push"]((()=>{g=e,n(8,g)}))},function(e){c=e,n(0,c)},function(){d=this.value,n(2,d)}]}class Ae extends c{constructor(e){super(),u(this,e,De,Le,d,{})}}export{Ae as default,Ie as prerender};
