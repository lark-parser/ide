var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,s=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&o(e,n,t[n]);if(l)for(var n of l(t))a.call(t,n)&&o(e,n,t[n]);return e},c=(e,l)=>t(e,n(l));import{S as i,i as u,s as d,e as p,c as h,a as f,d as g,b as m,f as v,F as k,r as y,u as $,w as b,x as E,t as x,g as _,h as P,K as w,l as L,k as I,n as D,j as A,m as N,o as O,v as V,L as j,M as T,J as S,N as B,O as C,A as q,P as R,Q as U,R as M,T as z,U as J,V as Z,W as K,X as W,Y as F,Z as G,_ as H}from"../chunks/vendor-be96c903.js";function X(e,t,n){const l=e.slice();return l[4]=t[n],l}function Q(e){let t,n;return{c(){t=p("code"),n=x(e[0]),this.h()},l(l){t=h(l,"CODE",{class:!0});var r=f(t);n=_(r,e[0]),r.forEach(g),this.h()},h(){m(t,"class","svelte-sgqldn")},m(e,l){v(e,t,l),k(t,n)},p(e,t){1&t&&P(n,e[0])},i:w,o:w,d(e){e&&g(t)}}}function Y(e){let t,n,l,r;const a=[te,ee],o=[];function s(e,t){return e[0].children.length?0:1}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),l=L()},l(e){n.l(e),l=L()},m(e,n){o[t].m(e,n),v(e,l,n),r=!0},p(e,r){let c=t;t=s(e),t===c?o[t].p(e,r):(y(),$(o[c],1,1,(()=>{o[c]=null})),b(),n=o[t],n?n.p(e,r):(n=o[t]=a[t](e),n.c()),E(n,1),n.m(l.parentNode,l))},i(e){r||(E(n),r=!0)},o(e){$(n),r=!1},d(e){o[t].d(e),e&&g(l)}}}function ee(e){let t,n,l,r,a=e[0].data+"";return{c(){t=p("span"),n=p("span"),l=I(),r=x(a),this.h()},l(e){t=h(e,"SPAN",{});var o=f(t);n=h(o,"SPAN",{class:!0}),f(n).forEach(g),l=D(o),r=_(o,a),o.forEach(g),this.h()},h(){m(n,"class","no-arrow svelte-sgqldn")},m(e,a){v(e,t,a),k(t,n),k(t,l),k(t,r)},p(e,t){1&t&&a!==(a=e[0].data+"")&&P(r,a)},i:w,o:w,d(e){e&&g(t)}}}function te(e){let t,n,l,r,a,o,s,c,i,u,d,w=e[0].data+"",A=e[1]&&ne(e);return{c(){t=p("span"),n=p("span"),l=x("▶"),r=I(),a=p("span"),o=x(w),s=I(),A&&A.c(),c=L(),this.h()},l(e){t=h(e,"SPAN",{});var i=f(t);n=h(i,"SPAN",{class:!0});var u=f(n);l=_(u,"▶"),u.forEach(g),r=D(i),a=h(i,"SPAN",{class:!0});var d=f(a);o=_(d,w),d.forEach(g),i.forEach(g),s=D(e),A&&A.l(e),c=L(),this.h()},h(){m(n,"class","arrow svelte-sgqldn"),T(n,"arrowDown",e[2]),m(a,"class","label svelte-sgqldn")},m(p,h){v(p,t,h),k(t,n),k(n,l),k(t,r),k(t,a),k(a,o),v(p,s,h),A&&A.m(p,h),v(p,c,h),i=!0,u||(d=S(t,"click",e[3]),u=!0)},p(e,t){4&t&&T(n,"arrowDown",e[2]),(!i||1&t)&&w!==(w=e[0].data+"")&&P(o,w),e[1]?A?(A.p(e,t),2&t&&E(A,1)):(A=ne(e),A.c(),E(A,1),A.m(c.parentNode,c)):A&&(y(),$(A,1,1,(()=>{A=null})),b())},i(e){i||(E(A),i=!0)},o(e){$(A),i=!1},d(e){e&&g(t),e&&g(s),A&&A.d(e),e&&g(c),u=!1,d()}}}function ne(e){let t,n,l=[...e[0].children],r=[];for(let o=0;o<l.length;o+=1)r[o]=le(X(e,l,o));const a=e=>$(r[e],1,1,(()=>{r[e]=null}));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=h(e,"DIV",{class:!0});var n=f(t);for(let t=0;t<r.length;t+=1)r[t].l(n);n.forEach(g),this.h()},h(){m(t,"class","children")},m(e,l){v(e,t,l);for(let n=0;n<r.length;n+=1)r[n].m(t,null);n=!0},p(e,n){if(1&n){let o;for(l=[...e[0].children],o=0;o<l.length;o+=1){const a=X(e,l,o);r[o]?(r[o].p(a,n),E(r[o],1)):(r[o]=le(a),r[o].c(),E(r[o],1),r[o].m(t,null))}for(y(),o=l.length;o<r.length;o+=1)a(o);b()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)E(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)$(r[t]);n=!1},d(e){e&&g(t),j(r,e)}}}function le(e){let t,n;return t=new oe({props:{tree:e[4]}}),{c(){A(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,l){O(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.tree=e[4]),t.$set(l)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function re(e){let t,n,l,r,a;const o=[Y,Q],s=[];function c(e,t){return"Tree"===e[0].type?0:1}return l=c(e),r=s[l]=o[l](e),{c(){t=p("ul"),n=p("li"),r.c(),this.h()},l(e){t=h(e,"UL",{class:!0});var l=f(t);n=h(l,"LI",{});var a=f(n);r.l(a),a.forEach(g),l.forEach(g),this.h()},h(){m(t,"class","svelte-sgqldn")},m(e,r){v(e,t,r),k(t,n),s[l].m(n,null),a=!0},p(e,[t]){let a=l;l=c(e),l===a?s[l].p(e,t):(y(),$(s[a],1,1,(()=>{s[a]=null})),b(),r=s[l],r?r.p(e,t):(r=s[l]=o[l](e),r.c()),E(r,1),r.m(n,null))},i(e){a||(E(r),a=!0)},o(e){$(r),a=!1},d(e){e&&g(t),s[l].d()}}}function ae(e,t,n){let l,{tree:r}=t,a=!0;return e.$$set=e=>{"tree"in e&&n(0,r=e.tree)},e.$$.update=()=>{2&e.$$.dirty&&n(2,l=a)},[r,a,l,()=>{n(1,a=!a)}]}class oe extends i{constructor(e){super(),u(this,e,ae,re,d,{tree:0})}}function se(e){let t;return{c(){t=p("div"),this.h()},l(e){t=h(e,"DIV",{style:!0}),f(t).forEach(g),this.h()},h(){B(t,"height","80vh"),B(t,"border","1px solid grey")},m(n,l){v(n,t,l),e[3](t)},p:w,i:w,o:w,d(n){n&&g(t),e[3](null)}}}function ce(e,t,n){const l=C();let r,{text:a=""}=t;const o={comments:{lineComment:"//"},brackets:[["(",")"],["[","]"],["{","}"]],autoClosingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"/",close:"/"},{open:'"',close:'"'}],surroundingPairs:[["(",")"],["[","]"],["{","}"],["/","/"],['"','"']]},s={defaultToken:"",tokenPostfix:".lark",keywords:[],brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/%(import|ignore|declare|override|extend)/,"keyword"],[/[\|]/,"delimiter"],[/[{}\[\]()]/,"@brackets"],[/([a-zA-Z_]*)\s*\:/,"variable.name"],[/\s*->\s*([a-zA-Z_]*)/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"identifier"}}]],whitespace:[[/\s+/,"white"],[/(^\/\/.*$)/,"comment"]],numbers:[[/-?0x([abcdef]|[ABCDEF]|\d)+[lL]?/,"number.hex"],[/-?(\d*\.)?\d+([eE][+\-]?\d+)?[jJ]?[lL]?/,"number"]],strings:[[/'$/,"string.escape","@popall"],[/'/,"string.escape","@stringBody"],[/"$/,"string.escape","@popall"],[/"/,"string.escape","@dblStringBody"]],stringBody:[[/[^\\']+$/,"string","@popall"],[/[^\\']+/,"string"],[/\\./,"string"],[/'/,"string.escape","@popall"],[/\\$/,"string"]],dblStringBody:[[/[^\\"]+$/,"string","@popall"],[/[^\\"]+/,"string"],[/\\./,"string"],[/"/,"string.escape","@popall"],[/\\$/,"string"]]}};let c;const i={value:a,language:"lark",automaticLayout:!0};return q((()=>{require.config({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.26.1/min/vs"}}),require(["vs/editor/editor.main"],(e=>{e.languages.register({id:"lark",extensions:[".lark"],aliases:["Lark","lark"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",configuration:"./lark.js"}),e.languages.setMonarchTokensProvider("lark",s),e.languages.setLanguageConfiguration("lark",o),r=e.editor.create(c,i),n(1,a=r.getModel().getValue()),r.getModel().onDidChangeContent((e=>{n(1,a=r.getModel().getValue())})),l("ready",{})}))})),e.$$set=e=>{"text"in e&&n(1,a=e.text)},[c,a,function(e){if(r)return r.getModel().setValue(e)},function(e){R[e?"unshift":"push"]((()=>{c=e,n(0,c)}))}]}class ie extends i{constructor(e){super(),u(this,e,ce,se,d,{text:1,set_text:2})}get set_text(){return this.$$.ctx[2]}}function ue(e){let t,n,l,r,a,o,s,c,i,u,d,y,$,b,E,P,L,A,N,O,V,j,T,B;return{c(){t=p("div"),n=p("div"),l=p("div"),r=x("Parser:"),a=I(),o=p("div"),s=p("input"),c=I(),i=p("label"),u=x("Earley"),d=I(),y=p("div"),$=p("input"),b=I(),E=p("label"),P=x("LALR(1)"),L=I(),A=p("div"),N=p("input"),O=I(),V=p("label"),j=x("Keep all tokens"),this.h()},l(e){t=h(e,"DIV",{id:!0,class:!0});var p=f(t);n=h(p,"DIV",{class:!0});var m=f(n);l=h(m,"DIV",{});var v=f(l);r=_(v,"Parser:"),v.forEach(g),a=D(m),o=h(m,"DIV",{});var k=f(o);s=h(k,"INPUT",{type:!0,id:!0,name:!0}),c=D(k),i=h(k,"LABEL",{for:!0});var x=f(i);u=_(x,"Earley"),x.forEach(g),k.forEach(g),d=D(m),y=h(m,"DIV",{});var w=f(y);$=h(w,"INPUT",{type:!0,id:!0,name:!0}),b=D(w),E=h(w,"LABEL",{for:!0});var I=f(E);P=_(I,"LALR(1)"),I.forEach(g),w.forEach(g),m.forEach(g),L=D(p),A=h(p,"DIV",{class:!0});var T=f(A);N=h(T,"INPUT",{type:!0,id:!0}),O=D(T),V=h(T,"LABEL",{for:!0});var S=f(V);j=_(S,"Keep all tokens"),S.forEach(g),T.forEach(g),p.forEach(g),this.h()},h(){m(s,"type","radio"),m(s,"id","earley"),m(s,"name","parser"),s.__value="earley",s.value=s.__value,s.checked=!0,e[6][0].push(s),m(i,"for","earley"),m($,"type","radio"),m($,"id","lalr"),m($,"name","parser"),$.__value="lalr",$.value=$.__value,e[6][0].push($),m(E,"for","lalr"),m(n,"class","option svelte-lws3ey"),m(N,"type","checkbox"),m(N,"id","keep_all_tokens"),m(V,"for","keep_all_tokens"),m(A,"class","option svelte-lws3ey"),m(t,"id","options"),m(t,"class","svelte-lws3ey")},m(p,h){v(p,t,h),k(t,n),k(n,l),k(l,r),k(n,a),k(n,o),k(o,s),s.checked=s.__value===e[0],k(o,c),k(o,i),k(i,u),k(n,d),k(n,y),k(y,$),$.checked=$.__value===e[0],k(y,b),k(y,E),k(E,P),k(t,L),k(t,A),k(A,N),N.checked=e[1],k(A,O),k(A,V),k(V,j),T||(B=[S(s,"input",e[2]),S(s,"change",e[5]),S($,"input",e[2]),S($,"change",e[7]),S(N,"change",e[8]),S(N,"input",e[3])],T=!0)},p(e,[t]){1&t&&(s.checked=s.__value===e[0]),1&t&&($.checked=$.__value===e[0]),2&t&&(N.checked=e[1])},i:w,o:w,d(n){n&&g(t),e[6][0].splice(e[6][0].indexOf(s),1),e[6][0].splice(e[6][0].indexOf($),1),T=!1,U(B)}}}function de(e,t,n){let l,r,{options:a}=t;return e.$$set=e=>{"options"in e&&n(4,a=e.options)},e.$$.update=()=>{16&e.$$.dirty&&a&&(n(0,l=a.parser),n(1,r=a.keep_all_tokens))},[l,r,function(e){setTimeout((()=>{n(4,a=c(s({},a),{parser:l}))}))},function(e){setTimeout((()=>{n(4,a=c(s({},a),{keep_all_tokens:r}))}))},a,function(){l=this.__value,n(0,l)},[[]],function(){l=this.__value,n(0,l)},function(){r=this.checked,n(1,r)}]}class pe extends i{constructor(e){super(),u(this,e,de,ue,d,{options:4})}}function he(e,t,n){const l=e.slice();return l[24]=t[n],l}function fe(e,t,n){const l=e.slice();return l[27]=t[n],l}function ge(e){let t,n,l,r,a=e[27].title+"";return{c(){t=p("option"),n=x(a),l=I(),this.h()},l(e){t=h(e,"OPTION",{});var r=f(t);n=_(r,a),l=D(r),r.forEach(g),this.h()},h(){t.__value=r=e[27].name,t.value=t.__value},m(e,r){v(e,t,r),k(t,n),k(t,l)},p:w,d(e){e&&g(t)}}}function me(e){let t,n,l=e[6],r=[];for(let a=0;a<l.length;a+=1)r[a]=ke(he(e,l,a));return{c(){t=x("Please wait, loading...\n\t\t"),n=p("ul");for(let e=0;e<r.length;e+=1)r[e].c()},l(e){t=_(e,"Please wait, loading...\n\t\t"),n=h(e,"UL",{});var l=f(n);for(let t=0;t<r.length;t+=1)r[t].l(l);l.forEach(g)},m(e,l){v(e,t,l),v(e,n,l);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(e,t){if(64&t){let a;for(l=e[6],a=0;a<l.length;a+=1){const o=he(e,l,a);r[a]?r[a].p(o,t):(r[a]=ke(o),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},i:w,o:w,d(e){e&&g(t),e&&g(n),j(r,e)}}}function ve(e){let t,n,l,r={ctx:e,current:null,token:null,hasCatch:!0,pending:we,then:$e,catch:ye,error:24,blocks:[,,,]};return G(n=e[3],r),{c(){t=L(),r.block.c()},l(e){t=L(),r.block.l(e)},m(e,n){v(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t,l=!0},p(t,l){e=t,r.ctx=e,8&l&&n!==(n=e[3])&&G(n,r)||H(r,e,l)},i(e){l||(E(r.block),l=!0)},o(e){for(let t=0;t<3;t+=1){const e=r.blocks[t];$(e)}l=!1},d(e){e&&g(t),r.block.d(e),r.token=null,r=null}}}function ke(e){let t,n,l=e[24]+"";return{c(){t=p("li"),n=x(l)},l(e){t=h(e,"LI",{});var r=f(t);n=_(r,l),r.forEach(g)},m(e,l){v(e,t,l),k(t,n)},p(e,t){64&t&&l!==(l=e[24]+"")&&P(n,l)},d(e){e&&g(t)}}}function ye(e){let t,n,l=e[24]+"";return{c(){t=p("pre"),n=x(l)},l(e){t=h(e,"PRE",{});var r=f(t);n=_(r,l),r.forEach(g)},m(e,l){v(e,t,l),k(t,n)},p(e,t){8&t&&l!==(l=e[24]+"")&&P(n,l)},i:w,o:w,d(e){e&&g(t)}}}function $e(e){let t,n,l,r={ctx:e,current:null,token:null,hasCatch:!0,pending:Pe,then:Ee,catch:be,value:23,error:24,blocks:[,,,]};return G(n=e[5],r),{c(){t=L(),r.block.c()},l(e){t=L(),r.block.l(e)},m(e,n){v(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t,l=!0},p(t,l){e=t,r.ctx=e,32&l&&n!==(n=e[5])&&G(n,r)||H(r,e,l)},i(e){l||(E(r.block),l=!0)},o(e){for(let t=0;t<3;t+=1){const e=r.blocks[t];$(e)}l=!1},d(e){e&&g(t),r.block.d(e),r.token=null,r=null}}}function be(e){let t,n,l=e[24]+"";return{c(){t=p("pre"),n=x(l)},l(e){t=h(e,"PRE",{});var r=f(t);n=_(r,l),r.forEach(g)},m(e,l){v(e,t,l),k(t,n)},p(e,t){32&t&&l!==(l=e[24]+"")&&P(n,l)},i:w,o:w,d(e){e&&g(t)}}}function Ee(e){let t,n,l,r;const a=[_e,xe],o=[];function s(e,t){return e[23]?0:1}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),l=L()},l(e){n.l(e),l=L()},m(e,n){o[t].m(e,n),v(e,l,n),r=!0},p(e,r){let c=t;t=s(e),t===c?o[t].p(e,r):(y(),$(o[c],1,1,(()=>{o[c]=null})),b(),n=o[t],n?n.p(e,r):(n=o[t]=a[t](e),n.c()),E(n,1),n.m(l.parentNode,l))},i(e){r||(E(n),r=!0)},o(e){$(n),r=!1},d(e){o[t].d(e),e&&g(l)}}}function xe(e){let t;return{c(){t=x("No result")},l(e){t=_(e,"No result")},m(e,n){v(e,t,n)},p:w,i:w,o:w,d(e){e&&g(t)}}}function _e(e){let t,n;return t=new oe({props:{tree:e[23]}}),{c(){A(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,l){O(t,e,l),n=!0},p(e,n){const l={};32&n&&(l.tree=e[23]),t.$set(l)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function Pe(e){let t;return{c(){t=x("Parsing...")},l(e){t=_(e,"Parsing...")},m(e,n){v(e,t,n)},p:w,i:w,o:w,d(e){e&&g(t)}}}function we(e){let t;return{c(){t=x("Building Parser...")},l(e){t=_(e,"Building Parser...")},m(e,n){v(e,t,n)},p:w,i:w,o:w,d(e){e&&g(t)}}}function Le(e){let t,n,l,r,a,o,s,c,i,u,d,P,w,L,T,B,C,q,F,G,H,X,Q,Y,ee;function te(t){e[12](t)}let ne={};void 0!==e[1]&&(ne.options=e[1]),a=new pe({props:ne}),R.push((()=>M(a,"options",te)));let le=e[9],re=[];for(let p=0;p<le.length;p+=1)re[p]=ge(fe(e,le,p));function ae(t){e[15](t)}let oe={id:"grammar"};void 0!==e[0]&&(oe.text=e[0]),T=new ie({props:oe}),e[14](T),R.push((()=>M(T,"text",ae))),T.$on("ready",e[10]);const se=[ve,me],ce=[];function ue(e,t){return e[4]?0:1}return H=ue(e),X=ce[H]=se[H](e),{c(){t=I(),n=p("section"),l=p("div"),r=p("div"),A(a.$$.fragment),s=I(),c=p("div"),i=p("div"),u=p("div"),d=x("Load Grammar:"),P=I(),w=p("select");for(let e=0;e<re.length;e+=1)re[e].c();L=I(),A(T.$$.fragment),C=I(),q=p("textarea"),F=I(),G=p("div"),X.c(),this.h()},l(e){z('[data-svelte="svelte-3fm5e0"]',document.head).forEach(g),t=D(e),n=h(e,"SECTION",{id:!0,class:!0});var o=f(n);l=h(o,"DIV",{id:!0,class:!0});var p=f(l);r=h(p,"DIV",{id:!0,class:!0});var m=f(r);N(a.$$.fragment,m),m.forEach(g),s=D(p),c=h(p,"DIV",{id:!0,class:!0});var v=f(c);i=h(v,"DIV",{class:!0});var k=f(i);u=h(k,"DIV",{});var y=f(u);d=_(y,"Load Grammar:"),y.forEach(g),P=D(k),w=h(k,"SELECT",{class:!0});var $=f(w);for(let t=0;t<re.length;t+=1)re[t].l($);$.forEach(g),k.forEach(g),v.forEach(g),L=D(p),N(T.$$.fragment,p),p.forEach(g),C=D(o),q=h(o,"TEXTAREA",{id:!0,class:!0}),f(q).forEach(g),F=D(o),G=h(o,"DIV",{id:!0,class:!0});var b=f(G);X.l(b),b.forEach(g),o.forEach(g),this.h()},h(){document.title="Lark IDE",m(r,"id","options"),m(r,"class","svelte-99vlcc"),m(w,"class","svelte-99vlcc"),void 0===e[7]&&J((()=>e[13].call(w))),m(i,"class","option svelte-99vlcc"),m(c,"id","load-grammar"),m(c,"class","svelte-99vlcc"),m(l,"id","grammar_pane"),m(l,"class","svelte-99vlcc"),m(q,"id","text"),m(q,"class","svelte-99vlcc"),m(G,"id","output"),m(G,"class","svelte-99vlcc"),m(n,"id","ide"),m(n,"class","svelte-99vlcc")},m(o,p){v(o,t,p),v(o,n,p),k(n,l),k(l,r),O(a,r,null),k(l,s),k(l,c),k(c,i),k(i,u),k(u,d),k(i,P),k(i,w);for(let e=0;e<re.length;e+=1)re[e].m(w,null);Z(w,e[7]),k(l,L),O(T,l,null),k(n,C),k(n,q),K(q,e[2]),k(n,F),k(n,G),ce[H].m(G,null),Q=!0,Y||(ee=[S(w,"change",e[13]),S(w,"change",e[11]),S(q,"input",e[16])],Y=!0)},p(e,[t]){const n={};if(!o&&2&t&&(o=!0,n.options=e[1],W((()=>o=!1))),a.$set(n),512&t){let n;for(le=e[9],n=0;n<le.length;n+=1){const l=fe(e,le,n);re[n]?re[n].p(l,t):(re[n]=ge(l),re[n].c(),re[n].m(w,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=le.length}640&t&&Z(w,e[7]);const l={};!B&&1&t&&(B=!0,l.text=e[0],W((()=>B=!1))),T.$set(l),4&t&&K(q,e[2]);let r=H;H=ue(e),H===r?ce[H].p(e,t):(y(),$(ce[r],1,1,(()=>{ce[r]=null})),b(),X=ce[H],X?X.p(e,t):(X=ce[H]=se[H](e),X.c()),E(X,1),X.m(G,null))},i(e){Q||(E(a.$$.fragment,e),E(T.$$.fragment,e),E(X),Q=!0)},o(e){$(a.$$.fragment,e),$(T.$$.fragment,e),$(X),Q=!1},d(l){l&&g(t),l&&g(n),V(a),j(re,l),e[14](null),V(T),ce[H].d(),Y=!1,U(ee)}}}const Ie=!0;function De(e,t,n){var l=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))((function(r,a){function o(e){try{c(l.next(e))}catch(t){a(t)}}function s(e){try{c(l.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((l=l.apply(e,t||[])).next())}))};const r={parser:"earley",keep_all_tokens:!1},a=[{title:"Blank",name:"blank",text:""},{title:"(easy) Hello World",name:"hello",text:"Hello, World!"},{title:"(easy) JSON parser",name:"json",text:'{"this": ["is", "JSON"]}',options:{parser:"lalr"}},{title:"(easy) Calculator",name:"calc",text:"20 / (13 - 6) + 1",options:{parser:"lalr"}}];let o,s,c,{grammar:i,options:u,text:d}=a[1];u=u||r;let p,h=[];function f(){c.globals.set("grammar",i),c.globals.set("options",u),n(3,o=c.runPythonAsync("parser = lark.Lark(grammar, **options.to_py())"))}let g,m="hello";function v(){return l(this,void 0,void 0,(function*(){if(console.log("Loading grammar",m),"blank"===m)return n(2,d=""),n(0,i=""),g.set_text(""),void n(1,u=r);let e=yield fetch("grammars/"+m+".lark");if(e.ok){n(0,i=yield e.text()),g.set_text(i);for(let e of a)if(e.name===m){n(2,d=e.text),n(1,u=e.options||r);break}}}))}return e.$$.update=()=>{var t;18&e.$$.dirty&&c&&u&&f(),17&e.$$.dirty&&c&&i&&(clearTimeout(p),p=setTimeout(f,500)),28&e.$$.dirty&&n(5,s=c&&o&&(t=d,c.globals.set("text",t),c.runPythonAsync("parser.parse(text)")))},[i,u,d,o,c,s,h,m,g,a,function(){return l(this,void 0,void 0,(function*(){var e,t;v(),c||(e=e=>{n(4,c=e)},(t=e=>{n(6,h=[...h,e])})&&t("Loading Pyodide"),require(["https://cdn.jsdelivr.net/pyodide/v0.18.0/full/pyodide.js"],(n=>{n.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.18.0/full/"}).then((async n=>{console.log("Pyodide loaded",n),t&&t("Installing micropip"),await n.loadPackage("micropip"),t&&t("Downloading & Installing Lark"),await n.runPythonAsync("import micropip; await micropip.install('lark-parser');"),n.runPython("import lark"),e(n),console.log("Ready!",n)}))})))}))},v,function(e){u=e,n(1,u)},function(){m=F(this),n(7,m),n(9,a)},function(e){R[e?"unshift":"push"]((()=>{g=e,n(8,g)}))},function(e){i=e,n(0,i)},function(){d=this.value,n(2,d)}]}class Ae extends i{constructor(e){super(),u(this,e,De,Le,d,{})}}export{Ae as default,Ie as prerender};
