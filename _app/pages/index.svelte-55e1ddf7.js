var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;import{S as c,i as s,s as i,e as u,c as d,a as f,d as h,K as p,f as v,J as m,L as g,A as y,M as E,t as x,k as $,g as _,n as b,b as k,F as P,N as I,O as L,P as O,j as V,Q as D,m as w,R as j,o as N,T,U as A,V as C,x as R,u as S,v as B,W as M,X as U,Y as J,l as W,Z as q,h as G}from"../chunks/vendor-8f9d1cf9.js";function H(t){let e;return{c(){e=u("div"),this.h()},l(t){e=d(t,"DIV",{style:!0}),f(e).forEach(h),this.h()},h(){p(e,"height","80vh"),p(e,"border","1px solid grey")},m(n,a){v(n,e,a),t[3](e)},p:m,i:m,o:m,d(n){n&&h(e),t[3](null)}}}function X(t,e,n){const a=g();let r,l,{text:o=""}=e;const c={value:o,language:"ruby",automaticLayout:!0};return y((()=>{require.config({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.26.1/min/vs"}}),require(["vs/editor/editor.main"],(t=>{r=t.editor.create(l,c),n(1,o=r.getModel().getValue()),r.getModel().onDidChangeContent((t=>{n(1,o=r.getModel().getValue())})),a("ready",{})}))})),t.$$set=t=>{"text"in t&&n(1,o=t.text)},[l,o,function(t){if(r)return r.getModel().setValue(t)},function(t){E[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class F extends c{constructor(t){super(),s(this,t,X,H,i,{text:1,set_text:2})}get set_text(){return this.$$.ctx[2]}}function K(t){let e,n,a,r,l,o,c,s,i,p,g,y,E,O,V,D,w,j;return{c(){e=u("div"),n=u("div"),a=u("div"),r=x("Parser:"),l=$(),o=u("div"),c=u("input"),s=$(),i=u("label"),p=x("Earley"),g=$(),y=u("div"),E=u("input"),O=$(),V=u("label"),D=x("LALR(1)"),this.h()},l(t){e=d(t,"DIV",{id:!0});var u=f(e);n=d(u,"DIV",{class:!0});var v=f(n);a=d(v,"DIV",{});var m=f(a);r=_(m,"Parser:"),m.forEach(h),l=b(v),o=d(v,"DIV",{});var x=f(o);c=d(x,"INPUT",{type:!0,id:!0,name:!0}),s=b(x),i=d(x,"LABEL",{for:!0});var $=f(i);p=_($,"Earley"),$.forEach(h),x.forEach(h),g=b(v),y=d(v,"DIV",{});var k=f(y);E=d(k,"INPUT",{type:!0,id:!0,name:!0}),O=b(k),V=d(k,"LABEL",{for:!0});var P=f(V);D=_(P,"LALR(1)"),P.forEach(h),k.forEach(h),v.forEach(h),u.forEach(h),this.h()},h(){k(c,"type","radio"),k(c,"id","earley"),k(c,"name","parser"),c.__value="earley",c.value=c.__value,c.checked=!0,t[4][0].push(c),k(i,"for","earley"),k(E,"type","radio"),k(E,"id","lalr"),k(E,"name","parser"),E.__value="lalr",E.value=E.__value,t[4][0].push(E),k(V,"for","lalr"),k(n,"class","option svelte-fi2lts"),k(e,"id","options")},m(u,d){v(u,e,d),P(e,n),P(n,a),P(a,r),P(n,l),P(n,o),P(o,c),c.checked=c.__value===t[0],P(o,s),P(o,i),P(i,p),P(n,g),P(n,y),P(y,E),E.checked=E.__value===t[0],P(y,O),P(y,V),P(V,D),w||(j=[I(c,"input",t[1]),I(c,"change",t[3]),I(E,"input",t[1]),I(E,"change",t[5])],w=!0)},p(t,[e]){1&e&&(c.checked=c.__value===t[0]),1&e&&(E.checked=E.__value===t[0])},i:m,o:m,d(n){n&&h(e),t[4][0].splice(t[4][0].indexOf(c),1),t[4][0].splice(t[4][0].indexOf(E),1),w=!1,L(j)}}}function Q(t,c,s){let i,{options:u}=c;return t.$$set=t=>{"options"in t&&s(2,u=t.options)},t.$$.update=()=>{4&t.$$.dirty&&u&&s(0,i=u.parser)},[i,function(t){var c,i;s(2,(c=((t,e)=>{for(var n in e||(e={}))r.call(e,n)&&o(t,n,e[n]);if(a)for(var n of a(e))l.call(e,n)&&o(t,n,e[n]);return t})({},u),i={parser:t.target.value},u=e(c,n(i))))},u,function(){i=this.__value,s(0,i)},[[]],function(){i=this.__value,s(0,i)}]}class Y extends c{constructor(t){super(),s(this,t,Q,K,i,{options:2})}}function Z(t,e,n){const a=t.slice();return a[23]=e[n],a}function z(t,e,n){const a=t.slice();return a[26]=e[n],a}function tt(t){let e,n,a,r,l=t[26].title+"";return{c(){e=u("option"),n=x(l),a=$(),this.h()},l(t){e=d(t,"OPTION",{});var r=f(e);n=_(r,l),a=b(r),r.forEach(h),this.h()},h(){e.__value=r=t[26].name,e.value=e.__value},m(t,r){v(t,e,r),P(e,n),P(e,a)},p:m,d(t){t&&h(e)}}}function et(t){let e,n,a=t[9],r=[];for(let l=0;l<a.length;l+=1)r[l]=at(Z(t,a,l));return{c(){e=x("Please wait, loading...\n\t\t"),n=u("ul");for(let t=0;t<r.length;t+=1)r[t].c()},l(t){e=_(t,"Please wait, loading...\n\t\t"),n=d(t,"UL",{});var a=f(n);for(let e=0;e<r.length;e+=1)r[e].l(a);a.forEach(h)},m(t,a){v(t,e,a),v(t,n,a);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(t,e){if(512&e){let l;for(a=t[9],l=0;l<a.length;l+=1){const o=Z(t,a,l);r[l]?r[l].p(o,e):(r[l]=at(o),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=a.length}},d(t){t&&h(e),t&&h(n),M(r,t)}}}function nt(t){let e,n,a={ctx:t,current:null,token:null,hasCatch:!0,pending:dt,then:lt,catch:rt,error:23};return J(n=t[3],a),{c(){e=W(),a.block.c()},l(t){e=W(),a.block.l(t)},m(t,n){v(t,e,n),a.block.m(t,a.anchor=n),a.mount=()=>e.parentNode,a.anchor=e},p(e,r){t=e,a.ctx=t,8&r&&n!==(n=t[3])&&J(n,a)||q(a,t,r)},d(t){t&&h(e),a.block.d(t),a.token=null,a=null}}}function at(t){let e,n,a=t[23]+"";return{c(){e=u("li"),n=x(a)},l(t){e=d(t,"LI",{});var r=f(e);n=_(r,a),r.forEach(h)},m(t,a){v(t,e,a),P(e,n)},p:m,d(t){t&&h(e)}}}function rt(t){let e,n,a=t[23]+"";return{c(){e=u("pre"),n=x(a)},l(t){e=d(t,"PRE",{});var r=f(e);n=_(r,a),r.forEach(h)},m(t,a){v(t,e,a),P(e,n)},p(t,e){8&e&&a!==(a=t[23]+"")&&G(n,a)},d(t){t&&h(e)}}}function lt(t){let e,n,a={ctx:t,current:null,token:null,hasCatch:!0,pending:ut,then:ct,catch:ot,value:22,error:23};return J(n=t[4],a),{c(){e=W(),a.block.c()},l(t){e=W(),a.block.l(t)},m(t,n){v(t,e,n),a.block.m(t,a.anchor=n),a.mount=()=>e.parentNode,a.anchor=e},p(e,r){t=e,a.ctx=t,16&r&&n!==(n=t[4])&&J(n,a)||q(a,t,r)},d(t){t&&h(e),a.block.d(t),a.token=null,a=null}}}function ot(t){let e,n,a=t[23]+"";return{c(){e=u("pre"),n=x(a)},l(t){e=d(t,"PRE",{});var r=f(e);n=_(r,a),r.forEach(h)},m(t,a){v(t,e,a),P(e,n)},p(t,e){16&e&&a!==(a=t[23]+"")&&G(n,a)},d(t){t&&h(e)}}}function ct(t){let e;function n(t,e){return"Tree"==t[22].type?it:st}let a=n(t),r=a(t);return{c(){r.c(),e=W()},l(t){r.l(t),e=W()},m(t,n){r.m(t,n),v(t,e,n)},p(t,l){a===(a=n(t))&&r?r.p(t,l):(r.d(1),r=a(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&h(e)}}}function st(t){let e,n=t[22]+"";return{c(){e=x(n)},l(t){e=_(t,n)},m(t,n){v(t,e,n)},p(t,a){16&a&&n!==(n=t[22]+"")&&G(e,n)},d(t){t&&h(e)}}}function it(t){let e,n,a=t[22].pretty()+"";return{c(){e=u("pre"),n=x(a)},l(t){e=d(t,"PRE",{});var r=f(e);n=_(r,a),r.forEach(h)},m(t,a){v(t,e,a),P(e,n)},p(t,e){16&e&&a!==(a=t[22].pretty()+"")&&G(n,a)},d(t){t&&h(e)}}}function ut(t){let e;return{c(){e=x("Parsing...")},l(t){e=_(t,"Parsing...")},m(t,n){v(t,e,n)},p:m,d(t){t&&h(e)}}}function dt(t){let e;return{c(){e=x("Building Parser...")},l(t){e=_(t,"Building Parser...")},m(t,n){v(t,e,n)},p:m,d(t){t&&h(e)}}}function ft(t){let e,n,a,r,l,o,c,s,i,p,m,g,y,U,J,W,q,G,H,X,K,Q,Z;function at(e){t[12](e)}let rt={};void 0!==t[1]&&(rt.options=t[1]),l=new Y({props:rt}),E.push((()=>O(l,"options",at)));let lt=t[7],ot=[];for(let u=0;u<lt.length;u+=1)ot[u]=tt(z(t,lt,u));function ct(e){t[15](e)}let st={id:"grammar"};void 0!==t[0]&&(st.text=t[0]),J=new F({props:st}),t[14](J),E.push((()=>O(J,"text",ct))),J.$on("ready",t[10]);let it=(t[8]?nt:et)(t);return{c(){e=$(),n=u("section"),a=u("div"),r=u("div"),V(l.$$.fragment),c=$(),s=u("div"),i=u("div"),p=u("div"),m=x("Load Grammar:"),g=$(),y=u("select");for(let t=0;t<ot.length;t+=1)ot[t].c();U=$(),V(J.$$.fragment),q=$(),G=u("textarea"),H=$(),X=u("div"),it.c(),this.h()},l(t){D('[data-svelte="svelte-3fm5e0"]',document.head).forEach(h),e=b(t),n=d(t,"SECTION",{id:!0,class:!0});var o=f(n);a=d(o,"DIV",{id:!0,class:!0});var u=f(a);r=d(u,"DIV",{id:!0,class:!0});var v=f(r);w(l.$$.fragment,v),v.forEach(h),c=b(u),s=d(u,"DIV",{id:!0,class:!0});var E=f(s);i=d(E,"DIV",{class:!0});var x=f(i);p=d(x,"DIV",{});var $=f(p);m=_($,"Load Grammar:"),$.forEach(h),g=b(x),y=d(x,"SELECT",{class:!0});var k=f(y);for(let e=0;e<ot.length;e+=1)ot[e].l(k);k.forEach(h),x.forEach(h),E.forEach(h),U=b(u),w(J.$$.fragment,u),u.forEach(h),q=b(o),G=d(o,"TEXTAREA",{id:!0,class:!0}),f(G).forEach(h),H=b(o),X=d(o,"DIV",{id:!0,class:!0});var P=f(X);it.l(P),P.forEach(h),o.forEach(h),this.h()},h(){document.title="Lark IDE",k(r,"id","options"),k(r,"class","svelte-99vlcc"),k(y,"class","svelte-99vlcc"),void 0===t[5]&&j((()=>t[13].call(y))),k(i,"class","option svelte-99vlcc"),k(s,"id","load-grammar"),k(s,"class","svelte-99vlcc"),k(a,"id","grammar_pane"),k(a,"class","svelte-99vlcc"),k(G,"id","text"),k(G,"class","svelte-99vlcc"),k(X,"id","output"),k(X,"class","svelte-99vlcc"),k(n,"id","ide"),k(n,"class","svelte-99vlcc")},m(o,u){v(o,e,u),v(o,n,u),P(n,a),P(a,r),N(l,r,null),P(a,c),P(a,s),P(s,i),P(i,p),P(p,m),P(i,g),P(i,y);for(let t=0;t<ot.length;t+=1)ot[t].m(y,null);T(y,t[5]),P(a,U),N(J,a,null),P(n,q),P(n,G),A(G,t[2]),P(n,H),P(n,X),it.m(X,null),K=!0,Q||(Z=[I(y,"change",t[13]),I(y,"change",t[11]),I(G,"input",t[16])],Q=!0)},p(t,[e]){const n={};if(!o&&2&e&&(o=!0,n.options=t[1],C((()=>o=!1))),l.$set(n),128&e){let n;for(lt=t[7],n=0;n<lt.length;n+=1){const a=z(t,lt,n);ot[n]?ot[n].p(a,e):(ot[n]=tt(a),ot[n].c(),ot[n].m(y,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=lt.length}160&e&&T(y,t[5]);const a={};!W&&1&e&&(W=!0,a.text=t[0],C((()=>W=!1))),J.$set(a),4&e&&A(G,t[2]),it.p(t,e)},i(t){K||(R(l.$$.fragment,t),R(J.$$.fragment,t),K=!0)},o(t){S(l.$$.fragment,t),S(J.$$.fragment,t),K=!1},d(a){a&&h(e),a&&h(n),B(l),M(ot,a),t[14](null),B(J),it.d(),Q=!1,L(Z)}}}const ht=!0;function pt(t,e,n){let a;var r=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,l){function o(t){try{s(a.next(t))}catch(e){l(e)}}function c(t){try{s(a.throw(t))}catch(e){l(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}s((a=a.apply(t,e||[])).next())}))};const l={parser:"earley"},o=[{title:"Blank",name:"blank",text:""},{title:"(easy) Hello World",name:"hello",text:"Hello, World!"},{title:"(easy) JSON parser",name:"json",text:'{"this": ["is", "JSON"]}',options:{parser:"lalr"}},{title:"(easy) Calculator",name:"calc",text:"20 / (13 - 6) + 1",options:{parser:"lalr"}}];let c,s,{grammar:i,options:u,text:d}=o[1];u=u||l;let f,h="hello";function p(){return r(this,void 0,void 0,(function*(){if(console.log("Loading grammar",h),"blank"===h)return n(2,d=""),n(0,i=""),f.set_text(""),void n(1,u=l);let t=yield fetch("grammars/"+h+".lark");if(t.ok){n(0,i=yield t.text()),f.set_text(i);for(let t of o)if(t.name===h){n(2,d=t.text),n(1,u=t.options||l);break}}}))}return t.$$.update=()=>{3&t.$$.dirty&&n(3,a=s),12&t.$$.dirty&&n(4,c=s)},[i,u,d,a,c,h,f,o,s,[],function(){return r(this,void 0,void 0,(function*(){p()}))},p,function(t){u=t,n(1,u)},function(){h=U(this),n(5,h),n(7,o)},function(t){E[t?"unshift":"push"]((()=>{f=t,n(6,f)}))},function(t){i=t,n(0,i)},function(){d=this.value,n(2,d)}]}class vt extends c{constructor(t){super(),s(this,t,pt,ft,i,{})}}export{vt as default,ht as prerender};
